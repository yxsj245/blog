---
title: 飞牛防火墙的配置一个文章教会你
createTime: 2025/3/30 19:42:35
permalink: /fn/qasks6rk/
tags:
  - 飞牛OS
  - 防火墙
  - 网络安全
---

本文将全面介绍飞牛OS防火墙的配置方法，帮助您构建安全可靠的网络防护体系。

<!-- more -->

## 概述

防火墙是一种网络安全系统，旨在监控和控制网络流量，根据预定义的安全规则决定是否允许数据包的传输。其主要功能是保护内部网络免受外部威胁，防止未经授权的访问，并在企业网络和互联网之间建立一道安全屏障。

通过流量过滤、阻止恶意攻击和记录网络活动，防火墙有效地提升了网络的安全性和稳定性。作为网络安全的第一道防线，防火墙在企业、机构和个人用户的网络环境中发挥着关键作用。

### 飞牛OS防火墙特点

- **智能防护**：自动识别和阻止常见网络攻击
- **灵活配置**：支持自定义规则和策略
- **防篡改设计**：默认规则重启后自动恢复
- **局域网友好**：默认允许局域网访问

::: important 重要提醒
如果您不会配置防火墙，仅启用防火墙而不设置规则，那么这个防火墙就是形同虚设，没有任何作用，因为防火墙的默认规则是通过所有流量。

如果随意设置也会导致您无法正常访问控制台，所以飞牛的防火墙做了防篡改设计，默认规则重启后会自动恢复，因此不需要过于担心。
:::

## 是否需要启用防火墙

### 使用场景分析

::: tip 大多数用户无需启用
绝大部分用户其实没有必要启用防火墙，因为IPv4都是经过NAT转发的，如果需要对外提供服务，需要在路由器上做端口映射，流量才能进入内网。
:::

**需要启用防火墙的场景：**

1. **IPv6环境**：由于IPv6地址空间巨大，不存在地址扫描问题，但如果需要允许外部访问特定服务，同时限制其他端口访问，可以使用防火墙进行精确控制

2. **公网IP直连**：如果您的飞牛OS直接连接公网IP，强烈建议启用防火墙

3. **安全要求较高**：企业环境或对安全有特殊要求的场景

::: note 作用范围
飞牛OS防火墙开启后，局域网IP默认可以正常访问，主要针对公网IP访问进行控制。
:::

## 启用防火墙

### 操作步骤

在飞牛OS系统界面中找到防火墙设置，点击开启即可：

![开启防火墙](https://picx.zhimg.com/80/v2-a4c1c81e2e37c9f6b22ff3b45d1991dd_720w.png)

::: tip 启用提示
启用防火墙后，系统将开始监控网络流量。建议在启用前先了解基本配置方法，避免配置错误导致无法访问。
:::

## 防火墙配置详解

### 默认动作设置

![默认动作配置](https://pica.zhimg.com/80/v2-f0c860b0b4bc409f28ef98eaff0314d3_720w.png)

**规则说明：**

- **允许访问**：如果规则列表中不存在匹配的规则，默认允许流量通过，一般搭配拒绝规则使用
- **拒绝访问**：如果规则列表中不存在匹配的规则，默认拒绝流量通过，一般搭配允许规则使用

::: important 配置建议
一般将默认规则设置为"拒绝访问"，然后针对需要访问的服务单独添加"允许"规则。如果设置为默认允许，则应该添加"拒绝"规则来阻止不需要的访问。
:::

### 网络协议配置

![网络协议设置](https://pic1.zhimg.com/80/v2-72428f4d9a4d7d931700952e00f7b010_720w.png)

**协议类型说明：**

| 协议 | 说明 | 常用端口示例 |
|------|------|-------------|
| TCP | 传输控制协议，可靠连接 | HTTP(80)、HTTPS(443)、SSH(22) |
| UDP | 用户数据报协议，无连接 | DNS(53)、DHCP(67/68) |
| ICMP | 网络控制消息协议 | Ping、网络诊断 |

**端口范围：** 1-65535

::: tip 学习参考
详细的TCP/UDP协议知识可以参考 [菜鸟教程TCP协议详解](https://www.runoob.com/tcpip/tcpip-tutorial.html)。
:::

### IP地址配置

**常用填写方式：**

- `0.0.0.0/0` - 表示所有IP地址
- `192.168.1.100` - 单个IP地址
- `192.168.1.0/24` - IP段，表示192.168.1.0-192.168.1.255
- `10.0.0.0/8` - 大型网段

::: note IP知识补充
关于公网IP申请困难的原因，主要是IPv4地址资源枯竭。现在大多数家庭用户使用的都是经过NAT转换的私有IP地址。
:::

### 其他设置选项

![其他配置选项](https://picx.zhimg.com/80/v2-dcd1ef0c347fc835f2b3c0149b1ddcc2_720w.png)

**字段说明：**

- **权限**：此条策略的动作，"允许"表示符合规则的流量可以通过，"拒绝"表示阻止流量
- **状态**：此条策略是否生效，可以临时禁用某条规则
- **备注**：为策略添加说明，增加可读性和管理便利性
## 规则配置

### 入站规则

入站规则控制外部流量进入系统的权限，体现在别人访问您的服务时。

![入站规则示例](https://pica.zhimg.com/80/v2-abb4d6abcbfde0eaf99fe6f9dbfd9f5a_720w.png)

**规则解读：**

上图规则可以理解为：来源端口5244的TCP协议流量允许进入，状态为生效，此规则当前立即生效。

**常见入站规则配置：**

```
# Web服务
协议：TCP，端口：80,443，来源：0.0.0.0/0，权限：允许

# SSH服务  
协议：TCP，端口：22，来源：192.168.1.0/24，权限：允许

# FTP服务
协议：TCP，端口：21，来源：特定IP，权限：允许
```

### 出站规则

出站规则控制系统内部流量向外部访问的权限，体现在系统中的联网软件需要对外访问时。

**配置建议：**

::: tip 一般无需配置
大多数情况下不需要配置出站策略，除非需要禁止某个应用对外联网。
:::

::: danger 重要警告
如果在出站规则中拒绝所有流量，会导致所有应用无法联网！因此一般出站规则保持默认即可，不需要修改。如果确实需要修改，配置方式与入站规则相同。
:::

### 规则排序和优先级

![规则排序示例](https://pic1.zhimg.com/80/v2-c9a7ca574cd233bca3592cba51a7d582_720w.png)

**排序技巧：**

可以拖拽规则来调整匹配顺序。适用于无法修改防火墙默认规则的情况：

:::: steps

1. **设置允许规则**
   首先添加需要放通的常用端口规则

2. **添加拒绝规则**  
   然后设置一个全部拒绝的策略

3. **调整顺序**
   将允许规则放在拒绝规则之前

4. **实现效果**
   这样就实现了默认拒绝的效果，需要放通新端口时，在拒绝规则上方添加允许策略即可

::::

## 配置示例

### 常见服务配置

**Web服务器配置：**

| 服务 | 协议 | 端口 | 来源IP | 权限 | 备注 |
|------|------|------|--------|------|------|
| HTTP | TCP | 80 | 0.0.0.0/0 | 允许 | Web访问 |
| HTTPS | TCP | 443 | 0.0.0.0/0 | 允许 | 安全Web访问 |
| SSH | TCP | 22 | 192.168.1.0/24 | 允许 | 仅局域网SSH |

**文件服务器配置：**

| 服务 | 协议 | 端口 | 来源IP | 权限 | 备注 |
|------|------|------|--------|------|------|
| SMB | TCP | 445 | 192.168.1.0/24 | 允许 | 文件共享 |
| FTP | TCP | 21 | 特定IP | 允许 | FTP访问 |
| SFTP | TCP | 22 | 192.168.1.0/24 | 允许 | 安全文件传输 |

### 安全配置建议

1. **最小权限原则**：只开放必要的端口和服务
2. **IP限制**：尽量限制来源IP范围，避免使用0.0.0.0/0
3. **定期审查**：定期检查和清理不必要的规则
4. **备注完整**：为每条规则添加清晰的备注说明

## 故障排除

### 常见问题

::: details 无法访问Web界面
**可能原因：**
- 防火墙阻止了Web管理端口
- 规则配置错误

**解决方案：**
1. 重启飞牛OS系统（规则会自动恢复）
2. 检查是否有规则阻止了管理端口
3. 确认来源IP是否在允许范围内
:::

::: details 服务无法正常访问
**可能原因：**
- 没有添加对应的允许规则
- 规则顺序不正确
- 端口配置错误

**解决方案：**
1. 检查服务所需的端口和协议
2. 添加相应的允许规则
3. 确认规则的优先级顺序
:::

::: details 规则不生效
**可能原因：**
- 规则状态为禁用
- 规则位置不正确
- 缓存问题

**解决方案：**
1. 检查规则状态是否为启用
2. 调整规则顺序
3. 重启防火墙服务
:::

## 最佳实践

### 安全配置步骤

:::: steps

1. **规划服务**
   列出所有需要对外提供的服务及其端口

2. **设置默认策略**
   将默认动作设置为"拒绝访问"

3. **添加允许规则**
   为每个服务添加具体的允许规则

4. **测试验证**
   逐一测试每个服务的可访问性

5. **监控和调整**
   定期检查日志，根据需要调整规则

::::

### 维护建议

- **定期备份**：定期备份防火墙配置
- **文档记录**：维护详细的配置文档
- **监控日志**：定期查看防火墙日志
- **安全更新**：及时更新系统和安全规则

---

**通过合理配置防火墙，您可以有效保护飞牛OS系统的网络安全！** ::carbon:checkmark-filled =16px /green::