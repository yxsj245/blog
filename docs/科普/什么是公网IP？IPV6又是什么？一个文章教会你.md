---
title: 什么是公网IP？IPV6又是什么？一个文章教会你
createTime: 2025/4/26 20:07:27
permalink: /network/j53o2u2s/
tags:
  - 网络科普
  - 公网IP
  - IPv6
  - NAT
  - 网络配置
---

本文将用通俗易懂的语言为您详细介绍公网IP和IPv6的概念、区别及实际应用，帮助您理解为什么NAS无法远程访问以及如何解决。

<!-- more -->

## 概述

随着NAS的热度越来越高，现在很多用户开始折腾上手个人私有云存储，可以实现电影以及文件远程观看和下载，但是很多人也都在抱怨为什么我无法远程？了解这个问题之前，我们需要先理解什么是公网IP、内网IP以及IPv6。

### 适用人群

- NAS用户和家庭网络爱好者
- 想要了解网络基础知识的初学者
- 需要远程访问家庭设备的用户
- 对IPv6技术感兴趣的读者

::: tip 阅读提示
本文采用通俗易懂的语言，即使是网络小白也能快速理解。
:::

## 什么是公网IP

### 基本概念

**公网IP（Public IP Address）** 是指在全球互联网上唯一标识一个设备的IP地址。它是由互联网服务提供商（ISP）分配给用户的，允许设备直接与互联网上的其他设备进行通信。

### 公网IP的特点

- **全球唯一性**：每个公网IP在全球范围内都是唯一的
- **直接访问**：任何连接到互联网的设备都可以通过这个地址访问到它
- **ISP分配**：由运营商（如电信、联通、移动）分配
- **稀缺资源**：IPv4公网IP数量有限，获取困难

::: important 重要概念
拥有公网IP意味着您的设备可以被互联网上的任何设备直接访问，这是实现远程访问的基础。
:::

## 什么是内网IP（局域网）

### 基本概念

**内网IP（Internal IP Address）**，也称为私有IP（Private IP Address），是指在局域网（LAN）内部使用的IP地址。内网IP用于局域网内的设备之间的通信，不能直接在互联网上访问。

### 内网IP地址段

| 类别 | 地址段 | 适用场景 |
|------|--------|----------|
| **A类私有地址** | `10.0.0.0 - 10.255.255.255` | 大型企业或组织 |
| **B类私有地址** | `172.16.0.0 - 172.31.255.255` | 中型网络 |
| **C类私有地址** | `192.168.0.0 - 192.168.255.255` | 家庭或小型办公室网络 |

### 内网IP的特点

- **局域网专用**：只能在局域网内部使用
- **不可直接访问**：无法从互联网直接访问
- **可重复使用**：不同局域网可以使用相同的内网IP
- **自动分配**：通常由路由器或DHCP服务器自动分配

::: note 识别方法
如果您的设备IP地址是上述三个范围内的任何一个，那么您使用的就是内网IP。
:::

## IPv4地址资源短缺问题

### 数量限制分析

IPv4地址是一个32位的二进制数（0.0.0.0-255.255.255.255），总共约42.9亿个地址。

### 供需现状

| 项目 | 数量 | 备注 |
|------|------|------|
| **IPv4总地址数** | 42.9亿个 | 全球总量 |
| **中国分配地址** | 3.92亿个 | 截至2024年底 |
| **中国网民数量** | 11.08亿人 | 截至2024年12月 |

::: warning 资源短缺
42.9亿个IPv4地址 vs 11.08亿中国网民 = 明显的供需不平衡

这就是个人家庭宽带很难申请到IPv4公网IP的主要原因。
:::

所以IPv4必须使用NAT转发来实现所有设备能够正确接入互联网。

## 什么是NAT转发

### 基本概念

**NAT转发（Network Address Translation，网络地址转换）** 是一种网络技术，用于在局域网（LAN）和互联网之间进行IP地址转换。

### NAT的作用

- **解决地址不足**：允许多个设备共享一个公网IP地址
- **提高安全性**：隐藏内网设备的真实IP地址
- **实现互联网访问**：让内网设备能够访问外部网络

### NAT工作原理

```
内网设备 → 路由器(NAT) → 互联网
192.168.1.100:8080 → 公网IP:随机端口 → 目标服务器
```

::: note NAT的限制
使用NAT后，外部设备无法直接访问内网设备，这就是为什么NAS无法被远程访问的根本原因。
:::

## 什么是IPv6

### 基本概念

**IPv6（Internet Protocol version 6，互联网协议第6版）** 是用于替代IPv4的新一代互联网协议。它的主要目的是解决IPv4地址资源不足的问题，并提供更高效、更安全的网络通信。

### IPv6的发展历史

IPv6是由 **互联网工程任务组（IETF，Internet Engineering Task Force）** 开发的。IETF是一个国际性的非营利组织，负责制定和维护互联网的标准和协议。IPv6的开发始于1990年代，当时IPv4地址资源已经开始紧张，无法满足互联网快速发展的需求。

### IPv6的特点

| 特性 | IPv4 | IPv6 | 优势 |
|------|------|------|------|
| **地址长度** | 32位 | 128位 | 地址空间巨大 |
| **地址数量** | 42.9亿个 | 2^128个（约3.4×10^38个） | 几乎无限 |
| **安全性** | 需要额外配置 | 原生支持IPSec | 更安全 |
| **配置方式** | 手动/DHCP | 自动配置 | 更便捷 |

### IPv6地址数量对比

::: tip 数量对比
- **IPv4**：42.9亿个地址
- **IPv6**：2的128次方个地址 ≈ 340万亿万亿万亿个地址

IPv6的地址空间足以满足未来所有设备的需求，包括物联网设备、智能设备等。
:::

### IPv6的安全优势

IPv6原生支持 **IPSec（Internet Protocol Security）**，提供了端到端的数据加密和认证功能，无需额外配置即可获得更高的安全性。

## 中国IPv6普及现状

### 政策支持

目前中国正在加速普及IPv6的使用率，[点击查看政府具体措施](https://www.gov.cn/zhengce/202407/content_6962379.htm)。

### 普及情况

- **默认开通**：现在绝大部分的家庭均已默认在办理宽带时开通了IPv6
- **优先访问**：网站或APP如果支持IPv6将默认采用IPv6访问
- **检测工具**：可以通过在线工具检测IPv6连接状态

### IPv6连接检测

:::: steps

1. **检测IPv6优先访问**
   
   [点击这里检测是否IPv6优先访问](https://www.itdog.cn/localhost/)

2. **全面IPv6测试**
   
   如果不是IPv6优先，可以[点击这里进一步排查原因](https://www.test-ipv6.com/)

::::

## IPv6配置和故障排除

### 没有IPv6或无法使用的解决方案

如果检测显示您没有IPv6连接，可以按照以下步骤进行排查：

:::: steps

1. **检查路由器设置**

   确认路由器是否开启IPv6功能：

   ```
   路由器管理界面 → 高级设置 → IPv6设置 → 启用IPv6
   ```

   ::: tip 查找方法
   可以在搜索引擎中搜索"您的路由器型号 + 如何开启IPv6"获取具体步骤。
   :::

2. **检查光猫设置**

   如果路由器开启了IPv6，等待10秒左右刷新：

   - **正常情况**：应该出现前缀`240`开头的IPv6地址
   - **异常情况**：如果没有出现，一般是光猫没有开启IPv6

   ::: note 联系运营商
   可以打运营商电话报修，让装维人员给您开启光猫的IPv6功能。
   :::

3. **测试IPv6连通性**

   如果存在前缀`240`开头的IPv6地址，可以进行连通性测试：

   [点击这里测试IPv6连通性](https://www.itdog.cn/ping_ipv6/)

   输入您的设备IPv6地址进行检测。

::::

### 常见问题解决

::: details IPv6无法ping通
**可能原因：**
- 路由器防火墙阻止了IPv6连接
- 光猫未开启桥接模式

**解决方案：**
1. 关闭路由器防火墙，再次尝试
2. 如果还是不行，将光猫改成桥接模式
:::

::: details IPv6能ping通但端口无法访问
**可能原因：**
- 路由器未配置端口映射
- 光猫路由模式限制

**解决方案：**
1. 前往路由器进行端口映射配置
2. 如果端口映射后还是不行，将光猫改成桥接模式
:::

## 实际应用场景

### NAS远程访问

- **IPv4方案**：需要公网IP + 端口映射
- **IPv6方案**：直接使用IPv6地址访问（更简单）

### 家庭智能设备

- **物联网设备**：IPv6提供充足的地址空间
- **远程监控**：无需复杂的NAT配置

### 游戏和流媒体

- **在线游戏**：IPv6可以减少网络延迟
- **视频通话**：点对点连接更稳定

## 总结对比

| 方面 | IPv4 | IPv6 |
|------|------|------|
| **地址数量** | 有限（42.9亿） | 几乎无限 |
| **获取难度** | 困难（需要申请） | 容易（默认分配） |
| **远程访问** | 需要端口映射 | 直接访问 |
| **安全性** | 需要额外配置 | 原生安全 |
| **配置复杂度** | 复杂 | 简单 |
| **未来发展** | 逐步淘汰 | 主流趋势 |

---

**通过理解公网IP和IPv6的概念，您就能更好地配置和使用家庭网络设备了！** ::carbon:checkmark-filled =16px /green::
